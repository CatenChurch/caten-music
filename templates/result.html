{% extends "base.html" %}

{%  block  head  %}
{{  super ()  }}
<link rel="stylesheet" href="static/css/songslist.css">
{%  endblock  %}

{% block title %}
{% if mode == "search" %}
搜尋詩歌
{% endif %}
{% if mode == "allsongs" %}
所有詩歌
{% endif %}
{% if mode == "surf" %}
瀏覽詩歌
{% endif %}
{% endblock %}

{% block content%}

<div class="container text-center">
    <div id="home-title">
        {% if mode == "search" %}
        <h4 class="mb-4 search-infomation">
            搜尋結果 ： {{ keyword }}
        </h4>
        <p>找到 {{ songs_num }} 首歌</p>
        {% endif %}

        {% if mode == "surf" %}
        <h4 class="mb-4 search-infomation">
            <span>
                {% if scope == "language" %}
                    {% if keyword.find("c") != -1 %}
                        國語
                    {% endif %}
                    {% if keyword.find("t") != -1 %}
                        台語
                    {% endif %}
                {% endif %}
            </span>
        </h4>
        <p>共有 {{ songs_num }} 首歌</p>
        {% endif %}

        {% if mode == "allsongs" %}
        <h4 class="mb-4 search-infomation">
            所有詩歌
        </h4>
        {% endif %}

    </div>

    <hr>

    <!-- List -->

    {% for song in songs %}
    <div class="row m-0">
        <div class="col-md-1 col-lg-2"></div>
        <div class="col card my-3 p-0">
            <h5 class="card-header">
                {{ song['title'] }}
            </h5>
            <div class="card-body">
                <div class="row pt-2 pb-1">
                    <div class="col-1 col-md-3"></div>
                    <div class="col p-1 align-middle">
                        <span class="song-info">
                            {% if song["language"] == "Chinese" %}
                            國
                            {% endif %}
                            {% if song["language"] == "Taiwanese" %}
                            台
                            {% endif %}
                        </span>
                        <span class="song-info">{{ song["num_c"] }} - {{ song["num_i"] }}</span></div>
                    <div class="col-1"></div>
                    <div class="col p-1 align-middle"><span class="song-info">{{ song["tonality"] }}</span><span
                            class="song-info">
                            調</span></div>
                    <div class="col-2 p-1 show-more-song-content">
                        <a class="" data-toggle="collapse" href="{{ '#t' + song['uid'] }}" role="button"
                            aria-expanded="false" aria-controls="{{'t' + song['uid'] }}">
                            <i class="fas fa-chevron-down"></i>
                        </a>
                    </div>
                    <div class="col-md-1 col-lg-2"></div>
                </div>
            </div>
            <div class="collapse" id="{{'t' + song['uid'] }}">
                <div class="card-body pt-0 pb-4 card-body-hide-content card-body-border-bottom">
                    <div class="container">
                        <hr>
                    </div>
                    <div class="row py-3 lyrics-text">
                        <div class="col p-1 text-right"><span>詞：</span><span>{{ song['lyricist'] }}</span></div>
                        <div class="col-1 p-1"></div>
                        <div class="col p-1 text-left"><span>曲：</span><span>{{ song['composer'] }}</span></div>
                    </div>
                    <div class="container px-sm-5">

                        <!-- 歌詞 -->
                        {% for part in song['lyrics'] %}
                        <p class="card-text text-left lyrics-text">
                            {% for line in part[1:] %}
                            {{ line }} <br>
                            {% endfor %}
                        </p>
                        {% endfor %}
                        <!--  -->
                        <div class="pb-2 text-left album-info">
                            <span>
                                詩集：
                            </span>
                            <span>
                                {{ song['album'] }}
                            </span>
                        </div>
                        <hr>
                        <div class="row pt-3">
                            <div class="col px-3">
                                <a class="ppt-icon" href="{{ url_for('download_ppt', id_=song['uid']) }}">
                                    <i class="fas fa-file-powerpoint"></i>
                                    <div>投影片</div>
                                </a>
                            </div>
                            <div class="col px-3">
                                <a class="sheet-music-icon"
                                    href="{{ url_for('download_sheetmusic', id_=song['uid']) }}">
                                    <i class="fas fa-file-alt"></i>
                                    <div>歌譜</div>
                                </a>
                            </div>
                            <div class="col px-3">
                                <a class="youtube-icon"
                                    href="{{ 'https://www.youtube.com/results?search_query=' + song['title'] }}">
                                    <i class="fab fa-youtube"></i>
                                    <div>Youtube</div>
                                </a>
                            </div>
                        </div>
                        <hr class="mt-3 mb-3">
                        <div class="row pt-1">
                            <div class="col px-4">
                                <a class="report-icon" href="{{ url_for('report_song', id_=song['uid']) }}">
                                    <i class="fas fa-flag"></i>&nbsp;回報
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-1 col-lg-2"></div>
    </div>
    {% endfor %}

    <a class="back-to-home" href="/">回首頁</a>

</div>
{% endblock %}
